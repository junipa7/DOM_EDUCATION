<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì´ë²¤íŠ¸ ì‹¤ìŠµ</title>
  </head>
  <body>
    <input id="nameInput" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
    <button id="generateBtn">í”„ë¡œí•„ ìƒì„±</button>

    <div
      id="profileBox"
      style="
        position: relative;
        padding: 50px;
        border: 1px solid #ccc;
        margin-top: 30px;
      "
    >
      ğŸ§‘ ì‚¬ìš©ì í”„ë¡œí•„
    </div>

    <script>
      const input = document.getElementById("nameInput");
      const button = document.getElementById("generateBtn");
      const profileBox = document.getElementById("profileBox");

      let tooltip = null; // íˆ´íŒ DOM ì°¸ì¡° ë³€ìˆ˜
      let moveHandler = null; // mousemove í•¸ë“¤ëŸ¬ ì°¸ì¡°

      // 1. í‚¤ë³´ë“œ ì…ë ¥ ì¶”ì 
      input.addEventListener("keydown", (event) => {
        console.log("ì…ë ¥ í‚¤:", event.key);
      });

      // 2. ë³µì‚¬ ë°©ì§€
      document.addEventListener("copy", (event) => {
        alert("ë³µì‚¬ ê¸ˆì§€ì…ë‹ˆë‹¤.");
        event.preventDefault();
      });

      // 3. ë²„íŠ¼ 1íšŒ í´ë¦­ë§Œ í—ˆìš©
      button.addEventListener(
        "click",
        () => {
          alert("ëœë¤ í”„ë¡œí•„ ìƒì„± ì™„ë£Œ!");
        },
        { once: true }
      );

      // 4-1. íˆ´íŒ ìƒì„± í•¨ìˆ˜
      function showTooltip(event) {
        if (document.querySelector(".tooltip")) return;

        console.log("íˆ´íŒ ì´ë²¤íŠ¸ ë“±ë¡ë¨");

        tooltip = document.createElement("div");
        tooltip.textContent = "í”„ë¡œí•„ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.";
        tooltip.className = "tooltip";
        tooltip.style.position = "absolute";
        tooltip.style.background = "black";
        tooltip.style.color = "white";
        tooltip.style.padding = "6px";
        tooltip.style.borderRadius = "4px";
        tooltip.style.pointerEvents = "none";

        profileBox.appendChild(tooltip);

        moveHandler = moveTooltip;
        profileBox.addEventListener("mousemove", moveHandler);
        moveTooltip(event); // ì´ˆê¸° ìœ„ì¹˜ ì„¸íŒ…
      }

      // 4-2. íˆ´íŒ ìœ„ì¹˜ ê°±ì‹  í•¨ìˆ˜
      function moveTooltip(event) {
        if (!tooltip) return;
        tooltip.style.left = event.offsetX + 15 + "px";
        tooltip.style.top = event.offsetY + 15 + "px";
      }

      // 4-3. íˆ´íŒ ì œê±° ë° mousemove ì œê±°
      function hideTooltip() {
        if (tooltip) {
          tooltip.remove();
          tooltip = null;
        }

        if (moveHandler) {
          profileBox.removeEventListener("mousemove", moveHandler);
          moveHandler = null;
          console.log("íˆ´íŒ ì´ë²¤íŠ¸ ì œê±°ë¨");
        }
      }

      // ë§ˆìš°ìŠ¤ ì§„ì… / ì´íƒˆ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
      profileBox.addEventListener("mouseenter", showTooltip);
      profileBox.addEventListener("mouseleave", hideTooltip);
    </script>
  </body>
</html>
