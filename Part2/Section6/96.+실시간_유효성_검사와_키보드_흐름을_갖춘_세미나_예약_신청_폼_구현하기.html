<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì„¸ë¯¸ë‚˜ ì‹ ì²­ í¼</title>
    <style>
      form {
        max-width: 400px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-family: sans-serif;
      }

      label {
        display: block;
        margin-bottom: 15px;
      }

      input,
      select,
      textarea {
        display: block;
        width: 100%;
        padding: 8px;
        margin-top: 4px;
        border: 2px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
        box-sizing: border-box;
      }

      .hint {
        display: block;
        margin-top: 5px;
        font-size: 13px;
        color: #555;
      }

      input.valid,
      select.valid,
      textarea.valid {
        border-color: green;
      }

      input.invalid,
      select.invalid,
      textarea.invalid {
        border-color: red;
      }

      button {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin-top: 10px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      button:disabled {
        background-color: #aaa;
        cursor: not-allowed;
      }

      #result-message {
        text-align: center;
        font-weight: bold;
        margin-top: 20px;
        color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <form id="seminar-form">
      <label
        >ì´ë¦„:
        <input type="text" name="name" maxlength="10" autofocus />
        <span class="hint" id="name-hint"></span>
      </label>

      <label
        >ì´ë©”ì¼:
        <input type="email" name="email" />
        <span class="hint" id="email-hint"></span>
      </label>

      <label
        >ì°¸ê°€ ì¼ì:
        <select name="date">
          <option value="">ì¼ìë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="2025-08-10">2025ë…„ 8ì›” 10ì¼</option>
          <option value="2025-08-11">2025ë…„ 8ì›” 11ì¼</option>
        </select>
        <span class="hint" id="date-hint"></span>
      </label>

      <label
        >ì°¸ì„ì ìˆ˜:
        <input type="number" name="count" min="1" />
        <span class="hint" id="count-hint"></span>
      </label>

      <label
        >ìš”ì²­ ì‚¬í•­:
        <textarea name="memo" rows="3"></textarea>
        <span class="hint" id="memo-hint"></span>
      </label>

      <button type="submit" disabled>ì‹ ì²­í•˜ê¸°</button>
    </form>

    <p id="result-message"></p>

    <script>
      const form = document.getElementById("seminar-form");
      const fields = {
        name: form.name,
        email: form.email,
        date: form.date,
        count: form.count,
        memo: form.memo,
      };
      const hints = {
        name: document.getElementById("name-hint"),
        email: document.getElementById("email-hint"),
        date: document.getElementById("date-hint"),
        count: document.getElementById("count-hint"),
        memo: document.getElementById("memo-hint"),
      };
      const submitBtn = form.querySelector("button");
      const resultMessage = document.getElementById("result-message");

      const validationState = {
        name: false,
        email: false,
        date: false,
        count: false,
      };

      // ì´ë¦„ ìœ íš¨ì„± ê²€ì‚¬ â€“ 2ì ì´ìƒ
      fields.name.addEventListener("input", () => {
        const len = fields.name.value.trim().length;
        if (len >= 2) {
          hints.name.textContent = `âœ… ${len}ì ì…ë ¥ë¨`;
          setValid("name");
        } else {
          hints.name.textContent = "âŒ ì´ë¦„ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.";
          setInvalid("name");
        }
        updateSubmitState();
      });

      // ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬ â€“ blur ì‹œì ì—ì„œë§Œ ì‹¤í–‰
      fields.email.addEventListener("blur", () => {
        const val = fields.email.value;
        if (val.includes("@") && val.includes(".")) {
          hints.email.textContent = "âœ… ìœ íš¨í•œ ì´ë©”ì¼ì…ë‹ˆë‹¤.";
          setValid("email");
        } else {
          hints.email.textContent = "âŒ ì´ë©”ì¼ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
          setInvalid("email");
        }
        updateSubmitState();
      });

      // ë‚ ì§œ ì„ íƒ â€“ change ì´ë²¤íŠ¸ ì‚¬ìš©
      fields.date.addEventListener("change", () => {
        if (fields.date.value !== "") {
          hints.date.textContent = "âœ… ë‚ ì§œ ì„ íƒ ì™„ë£Œ";
          setValid("date");
        } else {
          hints.date.textContent = "âŒ ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";
          setInvalid("date");
        }
        updateSubmitState();
      });

      // ì°¸ì„ì ìˆ˜ ìœ íš¨ì„± ê²€ì‚¬ â€“ input ì´ë²¤íŠ¸
      fields.count.addEventListener("input", () => {
        const num = parseInt(fields.count.value);
        if (!isNaN(num) && num >= 1) {
          hints.count.textContent = `âœ… ${num}ëª…`;
          setValid("count");
        } else {
          hints.count.textContent = "âŒ 1ëª… ì´ìƒ ì…ë ¥í•˜ì„¸ìš”.";
          setInvalid("count");
        }
        updateSubmitState();
      });

      // ìš”ì²­ì‚¬í•­ â€“ ì•ˆë‚´ ë¬¸êµ¬ë§Œ í‘œì‹œ
      fields.memo.addEventListener("focus", () => {
        hints.memo.textContent = "ìš”ì²­ì‚¬í•­ì€ ì„ íƒ ì…ë ¥ì…ë‹ˆë‹¤.";
      });
      fields.memo.addEventListener("blur", () => {
        hints.memo.textContent = "";
      });

      // ìƒíƒœ í‘œì‹œ í•¨ìˆ˜ë“¤
      function setValid(key) {
        fields[key].classList.add("valid");
        fields[key].classList.remove("invalid");
        validationState[key] = true;
      }
      function setInvalid(key) {
        fields[key].classList.add("invalid");
        fields[key].classList.remove("valid");
        validationState[key] = false;
      }
      function updateSubmitState() {
        const allValid = Object.values(validationState).every(Boolean);
        submitBtn.disabled = !allValid;
      }

      // ì—”í„° í‚¤ë¡œ ë‹¤ìŒ í•„ë“œ ì´ë™ + ë§ˆì§€ë§‰ì—ì„œ submit ì‹¤í–‰
      form.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          const focusables = [
            ...form.querySelectorAll("input, select, textarea"),
          ];
          const current = document.activeElement;
          const idx = focusables.indexOf(current);
          if (idx >= 0 && idx < focusables.length - 1) {
            e.preventDefault();
            focusables[idx + 1].focus();
          } else if (idx === focusables.length - 1 && !submitBtn.disabled) {
            e.preventDefault();
            form.requestSubmit();
          }
        }
      });

      // submit ì´ë²¤íŠ¸ ì²˜ë¦¬
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const firstInvalidKey = Object.keys(validationState).find(
          (key) => !validationState[key]
        );
        if (firstInvalidKey) {
          fields[firstInvalidKey].focus();
          return;
        }
        resultMessage.textContent = "ğŸ‰ ì‹ ì²­ ì™„ë£Œ!";
        form.reset();
        Object.keys(validationState).forEach((k) => {
          validationState[k] = false;
          fields[k].classList.remove("valid", "invalid");
          hints[k].textContent = "";
        });
        submitBtn.disabled = true;
      });
    </script>
  </body>
</html>
